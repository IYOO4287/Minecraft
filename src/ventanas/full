package ventanas;

import javax.swing.*;
import javax.swing.text.Utilities;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.Objects;


public class Encantamientos extends JFrame {
    public Encantamientos() {
        initComponents();
    }

    private void initComponents() {
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        setPreferredSize(new Dimension(600, 650));

        JLabel WindowEnchantTittle = new JLabel("Encantamientos", SwingConstants.CENTER);
        WindowEnchantTittle.setFont(new Font("Segoe UI", Font.BOLD, 30));
        JButton jButtonVolver = new JButton("Volver");
        jButtonVolver.setIcon(new ImageIcon(Objects.requireNonNull(getClass().getResource("/imagenes/arrowBack.png"))));
        jButtonVolver.addActionListener(this::jButtonVolverActionPerformed);

        JComboBox<String> comboBox = new JComboBox<>();
        comboBox.addItem("Seleccione una opción");
        comboBox.addItem("Casco");
        comboBox.addItem("Peto");
        comboBox.addItem("Grebas");
        comboBox.addItem("Botas");

        JTextArea textArea = new JTextArea(10, 20);
        textArea.setEditable(false);
        textArea.setFont(new Font("Segoe UI", Font.PLAIN, 18));
        textArea.setText("Seleccione una pieza de armadura");
        JScrollPane scrollPane = new JScrollPane(textArea);

        setLayout(null);

        WindowEnchantTittle.setBounds(175, 75, 250, 30);
        comboBox.setBounds(200, 150, 200, 30);
        scrollPane.setBounds(100, 250, 400, 300);
        jButtonVolver.setBounds(10, 10, 100, 30);

        add(WindowEnchantTittle);
        add(comboBox);
        add(scrollPane);
        add(jButtonVolver);

        JLabel backgroundEnchants = new JLabel(new ImageIcon(Objects.requireNonNull(getClass().getResource("/imagenes/backgroundEnchants.jpg"))));
        backgroundEnchants.setBounds(0, 0, 600, 650);
        add(backgroundEnchants);

        comboBox.addActionListener(e -> {
            String option = (String) comboBox.getSelectedItem();
            String enchantmentInfo;

            switch (option) {
                case "Casco":
                    enchantmentInfo = """
                            Afinidad acuática (1)
                            Respiración (1-3)
                            Espinas(1-3)
                            Protección(1-4)
                            Protección contra explosiones(1-4)
                            Protección contra fuego(1-4)
                            Irrompibilidad(1-3)
                            Reparación(1)
                            """;
                    textArea.setText(enchantmentInfo);
                    break;
                case "Peto":
                    enchantmentInfo = """
                            Espinas(1-3)
                            Protección(1-4)
                            Protección contra explosiones(1-4)
                            Protección contra fuego(1-4)
                            Irrompibilidad(1-3)
                            Reparación(1)
                            """;
                    textArea.setText(enchantmentInfo);
                    break;
                case "Grebas":
                    enchantmentInfo = """
                            Furtivo rápido(1-3)
                            Espinas(1-3)
                            Protección(1-4)
                            Protección contra explosiones(1-4)
                            Protección contra fuego(1-4)
                            Irrompibilidad(1-3)
                            Reparación(1)
                            """;
                    textArea.setText(enchantmentInfo);
                    break;
                case "Botas":
                    enchantmentInfo = """
                            Agilidad acuática(1-3)
                            Caida de pluma(1-4)
                            Espinas(1-3)
                            Protección(1-4)
                            Protección contra explosiones(1-4)
                            Protección contra fuego(1-4)
                            Irrompibilidad(1-3)
                            Reparación(1)
                            """;
                    textArea.setText(enchantmentInfo);
                    break;
                case null:
                    break;
                default:
                    throw new IllegalStateException("Unexpected value: " + option);
            }

            // No se necesita abrir un nuevo diálogo, solo actualizar el textArea existente
            // textArea.setText(enchantmentInfo);
        });

        // Agregar MouseListener al textArea
        textArea.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                JTextArea source = (JTextArea) e.getSource();
                int offset = source.viewToModel2D(e.getPoint());
                try {
                    int start = Utilities.getRowStart(source, offset);
                    int end = Utilities.getRowEnd(source, offset);
                    String line = source.getText(start, end - start);

                    // Mostrar la información específica del encantamiento en el textArea mismo
                    // Puedes implementar cualquier lógica aquí según la línea seleccionada
                    // No es necesario abrir un JOptionPane, ya que la información se muestra en el textArea
                    Icon icono = new ImageIcon(Objects.requireNonNull(getClass().getResource("/imagenes/enchantedBook.png")));
                    JOptionPane.showMessageDialog(Encantamientos.this, "Información de: " + line, "Detalle del Encantamiento", JOptionPane.INFORMATION_MESSAGE, icono);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        });

        pack();
    }

    private void jButtonVolverActionPerformed(ActionEvent evt) {
        // Cerrar la ventana actual (Encantamientos) y mostrar la ventana principal (Interfaz)
        this.dispose();
        Interfaz ventanaPrincipal = new Interfaz();
        ventanaPrincipal.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> new Encantamientos().setVisible(true));
    }
}
